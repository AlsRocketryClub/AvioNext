ARM GAS  /tmp/ccFau4D4.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 1
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"random.c"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text.MX_RNG_Init,"ax",%progbits
  17              		.align	1
  18              		.global	MX_RNG_Init
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-d16
  25              	MX_RNG_Init:
  26              	.LFB350:
  27              		.file 1 "Core/Src/random.c"
   1:Core/Src/random.c **** #include "main.h"
   2:Core/Src/random.c **** 
   3:Core/Src/random.c **** int initialized=0;
   4:Core/Src/random.c **** RNG_HandleTypeDef hrng;
   5:Core/Src/random.c **** 
   6:Core/Src/random.c **** /**
   7:Core/Src/random.c ****   * @brief RNG Initialization Function
   8:Core/Src/random.c ****   * @param None
   9:Core/Src/random.c ****   * @retval None
  10:Core/Src/random.c ****   */
  11:Core/Src/random.c **** void MX_RNG_Init(void)
  12:Core/Src/random.c **** {
  28              		.loc 1 12 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 08B5     		push	{r3, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 3, -8
  36              		.cfi_offset 14, -4
  13:Core/Src/random.c **** 
  14:Core/Src/random.c ****   /* USER CODE BEGIN RNG_Init 0 */
  15:Core/Src/random.c **** 
  16:Core/Src/random.c ****   /* USER CODE END RNG_Init 0 */
  17:Core/Src/random.c **** 
  18:Core/Src/random.c ****   /* USER CODE BEGIN RNG_Init 1 */
  19:Core/Src/random.c **** 
  20:Core/Src/random.c ****   /* USER CODE END RNG_Init 1 */
  21:Core/Src/random.c ****   hrng.Instance = RNG;
  37              		.loc 1 21 3 view .LVU1
ARM GAS  /tmp/ccFau4D4.s 			page 2


  38              		.loc 1 21 17 is_stmt 0 view .LVU2
  39 0002 0748     		ldr	r0, .L5
  40 0004 074B     		ldr	r3, .L5+4
  41 0006 0360     		str	r3, [r0]
  22:Core/Src/random.c ****   hrng.Init.ClockErrorDetection = RNG_CED_ENABLE;
  42              		.loc 1 22 3 is_stmt 1 view .LVU3
  43              		.loc 1 22 33 is_stmt 0 view .LVU4
  44 0008 0023     		movs	r3, #0
  45 000a 4360     		str	r3, [r0, #4]
  23:Core/Src/random.c ****   if (HAL_RNG_Init(&hrng) != HAL_OK)
  46              		.loc 1 23 3 is_stmt 1 view .LVU5
  47              		.loc 1 23 7 is_stmt 0 view .LVU6
  48 000c FFF7FEFF 		bl	HAL_RNG_Init
  49              	.LVL0:
  50              		.loc 1 23 6 view .LVU7
  51 0010 18B9     		cbnz	r0, .L4
  52              	.L2:
  24:Core/Src/random.c ****   {
  25:Core/Src/random.c ****     Error_Handler();
  26:Core/Src/random.c ****   }
  27:Core/Src/random.c ****   /* USER CODE BEGIN RNG_Init 2 */
  28:Core/Src/random.c ****   initialized = 1;
  53              		.loc 1 28 3 is_stmt 1 view .LVU8
  54              		.loc 1 28 15 is_stmt 0 view .LVU9
  55 0012 054B     		ldr	r3, .L5+8
  56 0014 0122     		movs	r2, #1
  57 0016 1A60     		str	r2, [r3]
  29:Core/Src/random.c ****   /* USER CODE END RNG_Init 2 */
  30:Core/Src/random.c **** 
  31:Core/Src/random.c **** }
  58              		.loc 1 31 1 view .LVU10
  59 0018 08BD     		pop	{r3, pc}
  60              	.L4:
  25:Core/Src/random.c ****   }
  61              		.loc 1 25 5 is_stmt 1 view .LVU11
  62 001a FFF7FEFF 		bl	Error_Handler
  63              	.LVL1:
  64 001e F8E7     		b	.L2
  65              	.L6:
  66              		.align	2
  67              	.L5:
  68 0020 00000000 		.word	hrng
  69 0024 00180248 		.word	1208096768
  70 0028 00000000 		.word	.LANCHOR0
  71              		.cfi_endproc
  72              	.LFE350:
  74              		.section	.rodata.rand_range.str1.4,"aMS",%progbits,1
  75              		.align	2
  76              	.LC0:
  77 0000 52616E64 		.ascii	"Random not initialized!\012\000"
  77      6F6D206E 
  77      6F742069 
  77      6E697469 
  77      616C697A 
  78 0019 000000   		.align	2
  79              	.LC1:
  80 001c 726E6720 		.ascii	"rng error\012\000"
ARM GAS  /tmp/ccFau4D4.s 			page 3


  80      6572726F 
  80      720A00
  81              		.section	.text.rand_range,"ax",%progbits
  82              		.align	1
  83              		.global	rand_range
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  87              		.fpu fpv5-d16
  89              	rand_range:
  90              	.LVL2:
  91              	.LFB351:
  32:Core/Src/random.c **** 
  33:Core/Src/random.c **** 
  34:Core/Src/random.c **** uint32_t rand_range(uint32_t a, uint32_t b) {
  92              		.loc 1 34 45 view -0
  93              		.cfi_startproc
  94              		@ args = 0, pretend = 0, frame = 8
  95              		@ frame_needed = 0, uses_anonymous_args = 0
  96              		.loc 1 34 45 is_stmt 0 view .LVU13
  97 0000 30B5     		push	{r4, r5, lr}
  98              	.LCFI1:
  99              		.cfi_def_cfa_offset 12
 100              		.cfi_offset 4, -12
 101              		.cfi_offset 5, -8
 102              		.cfi_offset 14, -4
 103 0002 83B0     		sub	sp, sp, #12
 104              	.LCFI2:
 105              		.cfi_def_cfa_offset 24
  35:Core/Src/random.c **** 	if(!initialized)
 106              		.loc 1 35 2 is_stmt 1 view .LVU14
 107              		.loc 1 35 5 is_stmt 0 view .LVU15
 108 0004 164B     		ldr	r3, .L14
 109 0006 1B68     		ldr	r3, [r3]
 110              		.loc 1 35 4 view .LVU16
 111 0008 ABB1     		cbz	r3, .L12
 112 000a 0546     		mov	r5, r0
 113 000c 0C46     		mov	r4, r1
  36:Core/Src/random.c **** 	{
  37:Core/Src/random.c **** 		HAL_Delay(100);
  38:Core/Src/random.c **** 		CDC_Transmit_HS("Random not initialized!\n", strlen("Random not initialized!\n"));
  39:Core/Src/random.c **** 		return -1;
  40:Core/Src/random.c **** 	}
  41:Core/Src/random.c **** 
  42:Core/Src/random.c **** 	uint32_t rand = 0;
 114              		.loc 1 42 2 is_stmt 1 view .LVU17
 115              		.loc 1 42 11 is_stmt 0 view .LVU18
 116 000e 0023     		movs	r3, #0
 117 0010 0193     		str	r3, [sp, #4]
  43:Core/Src/random.c **** 	uint32_t MAX = 4294967295;
 118              		.loc 1 43 2 is_stmt 1 view .LVU19
 119              	.LVL3:
  44:Core/Src/random.c **** 	if(b>a && HAL_RNG_GenerateRandomNumber(&hrng, &rand) == HAL_OK)
 120              		.loc 1 44 2 view .LVU20
 121              		.loc 1 44 4 is_stmt 0 view .LVU21
 122 0012 8142     		cmp	r1, r0
 123 0014 04D9     		bls	.L10
ARM GAS  /tmp/ccFau4D4.s 			page 4


 124              		.loc 1 44 12 discriminator 1 view .LVU22
 125 0016 01A9     		add	r1, sp, #4
 126              	.LVL4:
 127              		.loc 1 44 12 discriminator 1 view .LVU23
 128 0018 1248     		ldr	r0, .L14+4
 129              	.LVL5:
 130              		.loc 1 44 12 discriminator 1 view .LVU24
 131 001a FFF7FEFF 		bl	HAL_RNG_GenerateRandomNumber
 132              	.LVL6:
 133              		.loc 1 44 9 discriminator 1 view .LVU25
 134 001e A0B1     		cbz	r0, .L13
 135              	.L10:
 136              	.LBB2:
  45:Core/Src/random.c **** 	{
  46:Core/Src/random.c **** 		return a+rand/(MAX/(b-a));
  47:Core/Src/random.c **** 	}
  48:Core/Src/random.c **** 	else
  49:Core/Src/random.c **** 	{
  50:Core/Src/random.c **** 		HAL_Delay(100);
 137              		.loc 1 50 3 is_stmt 1 view .LVU26
 138 0020 6420     		movs	r0, #100
 139 0022 FFF7FEFF 		bl	HAL_Delay
 140              	.LVL7:
  51:Core/Src/random.c **** 		CDC_Transmit_HS("rng error\n", strlen("rng error\n"));
 141              		.loc 1 51 3 view .LVU27
 142 0026 0A21     		movs	r1, #10
 143 0028 0F48     		ldr	r0, .L14+8
 144 002a FFF7FEFF 		bl	CDC_Transmit_HS
 145              	.LVL8:
 146              	.LBE2:
  52:Core/Src/random.c **** 	}
  53:Core/Src/random.c **** 	return -1;
 147              		.loc 1 53 2 view .LVU28
 148              		.loc 1 53 9 is_stmt 0 view .LVU29
 149 002e 4FF0FF30 		mov	r0, #-1
 150              	.LVL9:
 151              	.L7:
  54:Core/Src/random.c **** }
 152              		.loc 1 54 1 view .LVU30
 153 0032 03B0     		add	sp, sp, #12
 154              	.LCFI3:
 155              		.cfi_remember_state
 156              		.cfi_def_cfa_offset 12
 157              		@ sp needed
 158 0034 30BD     		pop	{r4, r5, pc}
 159              	.LVL10:
 160              	.L12:
 161              	.LCFI4:
 162              		.cfi_restore_state
 163              	.LBB3:
  37:Core/Src/random.c **** 		CDC_Transmit_HS("Random not initialized!\n", strlen("Random not initialized!\n"));
 164              		.loc 1 37 3 is_stmt 1 view .LVU31
 165 0036 6420     		movs	r0, #100
 166              	.LVL11:
  37:Core/Src/random.c **** 		CDC_Transmit_HS("Random not initialized!\n", strlen("Random not initialized!\n"));
 167              		.loc 1 37 3 is_stmt 0 view .LVU32
 168 0038 FFF7FEFF 		bl	HAL_Delay
ARM GAS  /tmp/ccFau4D4.s 			page 5


 169              	.LVL12:
  38:Core/Src/random.c **** 		return -1;
 170              		.loc 1 38 3 is_stmt 1 view .LVU33
 171 003c 1821     		movs	r1, #24
 172 003e 0B48     		ldr	r0, .L14+12
 173 0040 FFF7FEFF 		bl	CDC_Transmit_HS
 174              	.LVL13:
  39:Core/Src/random.c **** 	}
 175              		.loc 1 39 3 view .LVU34
  39:Core/Src/random.c **** 	}
 176              		.loc 1 39 10 is_stmt 0 view .LVU35
 177 0044 4FF0FF30 		mov	r0, #-1
 178 0048 F3E7     		b	.L7
 179              	.LVL14:
 180              	.L13:
  39:Core/Src/random.c **** 	}
 181              		.loc 1 39 10 view .LVU36
 182              	.LBE3:
  46:Core/Src/random.c **** 	}
 183              		.loc 1 46 3 is_stmt 1 view .LVU37
  46:Core/Src/random.c **** 	}
 184              		.loc 1 46 24 is_stmt 0 view .LVU38
 185 004a 641B     		subs	r4, r4, r5
 186              	.LVL15:
  46:Core/Src/random.c **** 	}
 187              		.loc 1 46 21 view .LVU39
 188 004c 4FF0FF30 		mov	r0, #-1
 189 0050 B0FBF4F4 		udiv	r4, r0, r4
  46:Core/Src/random.c **** 	}
 190              		.loc 1 46 16 view .LVU40
 191 0054 0198     		ldr	r0, [sp, #4]
 192 0056 B0FBF4F0 		udiv	r0, r0, r4
  46:Core/Src/random.c **** 	}
 193              		.loc 1 46 11 view .LVU41
 194 005a 2844     		add	r0, r0, r5
 195 005c E9E7     		b	.L7
 196              	.L15:
 197 005e 00BF     		.align	2
 198              	.L14:
 199 0060 00000000 		.word	.LANCHOR0
 200 0064 00000000 		.word	hrng
 201 0068 1C000000 		.word	.LC1
 202 006c 00000000 		.word	.LC0
 203              		.cfi_endproc
 204              	.LFE351:
 206              		.comm	hrng,20,4
 207              		.global	initialized
 208              		.section	.bss.initialized,"aw",%nobits
 209              		.align	2
 210              		.set	.LANCHOR0,. + 0
 213              	initialized:
 214 0000 00000000 		.space	4
 215              		.text
 216              	.Letext0:
 217              		.file 2 "/nix/store/9w2nhnv8b84a8yg8jsii47ikl60bz16p-gcc-arm-embedded-9.3.1/arm-none-eabi/include/
 218              		.file 3 "/nix/store/9w2nhnv8b84a8yg8jsii47ikl60bz16p-gcc-arm-embedded-9.3.1/arm-none-eabi/include/
 219              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
ARM GAS  /tmp/ccFau4D4.s 			page 6


 220              		.file 5 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 221              		.file 6 "Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h723xx.h"
 222              		.file 7 "/nix/store/9w2nhnv8b84a8yg8jsii47ikl60bz16p-gcc-arm-embedded-9.3.1/lib/gcc/arm-none-eabi/
 223              		.file 8 "/nix/store/9w2nhnv8b84a8yg8jsii47ikl60bz16p-gcc-arm-embedded-9.3.1/arm-none-eabi/include/
 224              		.file 9 "/nix/store/9w2nhnv8b84a8yg8jsii47ikl60bz16p-gcc-arm-embedded-9.3.1/arm-none-eabi/include/
 225              		.file 10 "/nix/store/9w2nhnv8b84a8yg8jsii47ikl60bz16p-gcc-arm-embedded-9.3.1/arm-none-eabi/include
 226              		.file 11 "/nix/store/9w2nhnv8b84a8yg8jsii47ikl60bz16p-gcc-arm-embedded-9.3.1/arm-none-eabi/include
 227              		.file 12 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 228              		.file 13 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
 229              		.file 14 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_rng.h"
 230              		.file 15 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 231              		.file 16 "Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
 232              		.file 17 "<built-in>"
 233              		.file 18 "Core/Inc/main.h"
ARM GAS  /tmp/ccFau4D4.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 random.c
     /tmp/ccFau4D4.s:17     .text.MX_RNG_Init:0000000000000000 $t
     /tmp/ccFau4D4.s:25     .text.MX_RNG_Init:0000000000000000 MX_RNG_Init
     /tmp/ccFau4D4.s:68     .text.MX_RNG_Init:0000000000000020 $d
                            *COM*:0000000000000014 hrng
     /tmp/ccFau4D4.s:75     .rodata.rand_range.str1.4:0000000000000000 $d
     /tmp/ccFau4D4.s:82     .text.rand_range:0000000000000000 $t
     /tmp/ccFau4D4.s:89     .text.rand_range:0000000000000000 rand_range
     /tmp/ccFau4D4.s:199    .text.rand_range:0000000000000060 $d
     /tmp/ccFau4D4.s:213    .bss.initialized:0000000000000000 initialized
     /tmp/ccFau4D4.s:209    .bss.initialized:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_RNG_Init
Error_Handler
HAL_RNG_GenerateRandomNumber
HAL_Delay
CDC_Transmit_HS
